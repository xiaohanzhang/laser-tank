{"version":3,"sources":["features/game/tiles.ts","utils/colors.ts","features/game/consts.ts","features/game/game.ts","features/game/Board.tsx","features/ui/MenuBar.tsx","app/App.tsx","serviceWorker.ts","app/rootReducer.ts","app/store.ts","index.tsx"],"names":["GameBackgrounds","GameObstacles","hex","v","toString","getColors","size","pattern","n","Math","floor","cbrt","getPattern","rgbs","map","p","colors","color","diff","push","results","each","r","g","b","sameCoord","p1","p2","x","y","forEachTile","board","position","callback","target","nextPosition","BOARD_SIZE","isAvailable","get","object","direction","GameObject","css","game","tile","FLAG","Flag","DIRT","Dirt","WATER","Water","MOVABLE_BLOCK_WATER","MovableBlockWater","ICE","Ice","THIN_ICE","ThinIce","TANK_MOVER_N","TankMoverN","TANK_MOVER_S","TankMoverS","TANK_MOVER_E","TankMoverE","TANK_MOVER_W","TankMoverW","TUNNEL","Tunnel","background","BRICKS","Bricks","SOLID_BLOCK","SolidBlock","CRYSTAL_BLOCK","CrystalBlock","MOVABLE_BLOCK","MovableBlock","ANTI_TANK_N","AntiTankN","ANTI_TANK_S","AntiTankS","ANTI_TANK_W","AntiTankW","ANTI_TANK_E","AntiTankE","ANTI_TANK_DEAD_N","AntiTankDeadN","ANTI_TANK_DEAD_S","AntiTankDeadS","ANTI_TANK_DEAD_W","AntiTankDeadW","ANTI_TANK_DEAD_E","AntiTankDeadE","MIRROR_NW","MirrorNW","MIRROR_NE","MirrorNE","MIRROR_SE","MirrorSE","MIRROR_SW","MirrorSW","ROTARY_MIRROR_NW","RotaryMirrorNW","ROTARY_MIRROR_NE","RotaryMirrorNE","ROTARY_MIRROR_SE","RotaryMirrorSE","ROTARY_MIRROR_SW","RotaryMirrorSW","from","to","toTile","this","getBackground","handleMove","fromTile","handleEmpty","getObstacle","handleFire","inSkipping","tank","current","checkTank","handleTank","GameObstacle","laser","next","cmd","start","dead","dead_direction","N","S","W","E","reverseDirection","getDirection","fireLasert","directions","indexOf","hitBack","hitMirror","directionMap","fire_directions","getFireDirections","next_direction","GameBackground","sameKindTunnel","t1","t2","pendingTunnels","tunnel","haveTank","pending","row","index","findIndex","splice","status","prevTank","shouldSkip","saveDataMap","0","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","isDirection","includes","db","record","history","state","initialState","range","timer","levels","levelIndex","gameSlice","createSlice","name","reducers","loadLevels","action","payload","localStorage","setItem","JSON","stringify","caseReducers","loadLevel","level","shift","forEach","i","cell","j","result","console","log","changeDirection","move","fire","undo","pop","moveTank","renderFrame","actions","exec","dispatch","getState","length","save","BoardTile","React","memo","tileSize","style","width","height","className","getBackgroundCss","filter","Boolean","join","borderRadius","border","boxSizing","getObstacleCss","BoardRow","key","Board","props","limit","boardRef","createRef","interval","bindAll","window","addEventListener","handleResize","animations","setInterval","a","el","backgrounds","querySelectorAll","bg","classList","remove","add","removeEventListener","clearInterval","offsetWidth","offsetHeight","setState","min","nextProps","nextState","tileStyle","ref","letter","display","margin","verticalAlign","lineHeight","left","top","Component","useSelector","useDispatch","debounceRenderFrame","debounce","useEffect","handleKeyDown","e","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","useState","currentMenu","setMenu","handleFile","file","reader","FileReader","onload","buffer","tLevel","levelName","hint","author","scoreDifficulty","sizeOfTLevel","sum","Object","values","byteLength","cursor","data","slice","chunk","Array","Uint8Array","String","fromCharCode","apply","Uint16Array","readAsArrayBuffer","items","render","id","type","onChange","files","currentTarget","onClick","menu","event","offsetTop","offsetLeft","onMouseEnter","App","getItem","parse","location","hostname","match","rootReducer","combineReducers","store","configureStore","reducer","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.04c122d1.chunk.js","sourcesContent":["import { get, each, findIndex } from 'lodash';\nimport {  GameState, DIRECTION, BOARD_SIZE } from './game';\n\nexport enum GameBackgrounds {\n    // background\n    FLAG = 1,\n    DIRT,\n    WATER,\n    MOVABLE_BLOCK_WATER,\n    ICE,\n    THIN_ICE,\n    TANK_MOVER_N,\n    TANK_MOVER_S,\n    TANK_MOVER_E,\n    TANK_MOVER_W,\n    TUNNEL,\n}\n\nexport enum GameObstacles {\n    // obstacle\n    BRICKS = 32,\n    SOLID_BLOCK,\n    CRYSTAL_BLOCK,\n    MOVABLE_BLOCK,\n    ANTI_TANK_N,\n    ANTI_TANK_S,\n    ANTI_TANK_W,\n    ANTI_TANK_E,\n    ANTI_TANK_DEAD_N,\n    ANTI_TANK_DEAD_S,\n    ANTI_TANK_DEAD_W,\n    ANTI_TANK_DEAD_E,\n    MIRROR_NW,\n    MIRROR_NE,\n    MIRROR_SE,\n    MIRROR_SW,\n    ROTARY_MIRROR_NW,\n    ROTARY_MIRROR_NE,\n    ROTARY_MIRROR_SE,\n    ROTARY_MIRROR_SW,\n}\n\nexport const sameCoord = (p1: Position, p2: Position): boolean => {\n    return p1.x === p2.x && p1.y === p2.y; \n}\n\nconst getDirection = (p1: Position, p2: Position): DIRECTION | null => {\n    if (p1.x !== p2.x || p1.y !== p2.y) {\n        if (p1.x === p2.x) {\n            return p1.y > p2.y ? 'N': 'S';\n        } else if (p1.y === p2.y) {\n            return p1.x > p2.x ? 'W': 'E';\n        }\n    }\n    return null;\n} \n\nconst reverseDirection = (direction: DIRECTION): DIRECTION => {\n    const reverseMap: {[key: string]: DIRECTION} = {N: 'S', S: 'N', W: 'E', E: 'W'};\n    return reverseMap[direction];\n}\n\nconst fireLasert = (game: GameState, laser: Position) => {\n    if (game.laser === null) {\n        game.laser = laser;\n    }\n}\n\nconst forEachTile = (board: Board, position: Position, callback: (tile: Tile, position: Position) => void | boolean) => {\n    let target = nextPosition(position);\n    while (target.x < BOARD_SIZE && target.y < BOARD_SIZE && target.x >= 0 && target.y >= 0) {\n        if (callback(board[target.y][target.x], target) === false) {\n            break;\n        }\n        target = nextPosition(target);\n    }\n}\n\nexport const isAvailable = (position: Position, board: Board): boolean => {\n    const { x, y } = position;\n    const target = get(board, `${y}.${x}`);\n    return !!(target && !target.object);\n}\n\nexport const nextPosition = (position: Position) => {\n    const { x, y, direction } = position;\n    return {\n        'N': { x, y: y - 1, direction },\n        'S': { x, y: y + 1, direction },\n        'E': { x: x + 1, y, direction },\n        'W': { x: x - 1, y, direction },\n    }[direction];\n}\n\nexport interface Tile {\n    background: GameBackgrounds,\n    color?: string,\n    object?: GameObstacles,\n};\n\nexport type Board = Tile[][]; \n\nexport interface Position {\n    x: number,\n    y: number,\n    direction: DIRECTION,\n}\n\n\nexport class GameObject {\n    static getBackground(tile: Tile): GameBackground {\n        return new ({\n            [GameBackgrounds.FLAG]: Flag,\n            [GameBackgrounds.DIRT]: Dirt,\n            [GameBackgrounds.WATER]: Water, \n            [GameBackgrounds.MOVABLE_BLOCK_WATER]: MovableBlockWater,\n            [GameBackgrounds.ICE]: Ice,\n            [GameBackgrounds.THIN_ICE]: ThinIce,\n            [GameBackgrounds.TANK_MOVER_N]: TankMoverN,\n            [GameBackgrounds.TANK_MOVER_S]: TankMoverS,\n            [GameBackgrounds.TANK_MOVER_E]: TankMoverE,\n            [GameBackgrounds.TANK_MOVER_W]: TankMoverW,\n            [GameBackgrounds.TUNNEL]: Tunnel,\n        }[tile.background])();\n    }\n\n    static getObstacle(tile: Tile): GameObstacle | null {\n        return !tile.object ? null : new ({\n            [GameObstacles.BRICKS]: Bricks,\n            [GameObstacles.SOLID_BLOCK]: SolidBlock,\n            [GameObstacles.CRYSTAL_BLOCK]: CrystalBlock,\n            [GameObstacles.MOVABLE_BLOCK]: MovableBlock,\n            [GameObstacles.ANTI_TANK_N]: AntiTankN,\n            [GameObstacles.ANTI_TANK_S]: AntiTankS,\n            [GameObstacles.ANTI_TANK_W]: AntiTankW,\n            [GameObstacles.ANTI_TANK_E]: AntiTankE,\n            [GameObstacles.ANTI_TANK_DEAD_N]: AntiTankDeadN,\n            [GameObstacles.ANTI_TANK_DEAD_S]: AntiTankDeadS,\n            [GameObstacles.ANTI_TANK_DEAD_W]: AntiTankDeadW,\n            [GameObstacles.ANTI_TANK_DEAD_E]: AntiTankDeadE,\n            [GameObstacles.MIRROR_NW]: MirrorNW, \n            [GameObstacles.MIRROR_NE]: MirrorNE, \n            [GameObstacles.MIRROR_SE]: MirrorSE, \n            [GameObstacles.MIRROR_SW]: MirrorSW, \n            [GameObstacles.ROTARY_MIRROR_NW]: RotaryMirrorNW, \n            [GameObstacles.ROTARY_MIRROR_NE]: RotaryMirrorNE, \n            [GameObstacles.ROTARY_MIRROR_SE]: RotaryMirrorSE, \n            [GameObstacles.ROTARY_MIRROR_SW]: RotaryMirrorSW, \n        }[tile.object])();\n    }\n\n    static handleMove(game: GameState, from: Position, to: Position){\n        const { board } = game;\n        const toTile = get(board, [to.y, to.x]);\n        if (toTile) {\n            this.getBackground(toTile).handleMove(game, to);\n            const fromTile = get(board, [from.y, from.x]);\n            if (!fromTile?.object) {\n                this.getBackground(fromTile).handleEmpty(game, from);\n            }\n        }\n    };\n\n    static handleFire(game: GameState, position: Position) {\n        const tile = get(game.board, [position.y, position.x]);\n        if (tile) {\n            this.getObstacle(tile)?.handleFire(game, position);\n        }\n    }\n\n    static checkTank(game: GameState, inSkipping: boolean = false) {\n        const { board, tank } = game;\n        if (!board[tank.y][tank.x].object) {\n            each(['N', 'W', 'E', 'S'], (direction: DIRECTION) => {\n                forEachTile(board, { ...tank, direction }, (tile, current) => {\n                    return this.getObstacle(tile)?.checkTank(game, current);\n                });\n            });\n            this.getBackground(board[tank.y][tank.x]).handleTank(game, inSkipping);\n        }\n    };\n\n    static getObstacleCss(tile: Tile) {\n        return this.getObstacle(tile)?.css;\n    }\n\n    static getBackgroundCss(tile: Tile) {\n        return this.getBackground(tile)?.css;\n    }\n\n    css = '';\n\n    handleMove(game: GameState, position: Position) {};\n    handleEmpty(game: GameState, position: Position) {};\n}\n\nclass GameObstacle extends GameObject {\n    handleFire(game: GameState, position: Position) {\n        game.laser = null;\n    }\n\n    checkTank(game: GameState, position: Position): boolean {\n        // false means current obstacle already blocked further obstacles seeing tank\n        return false;\n    }\n}\n\nclass Bricks extends GameObstacle {\n    css = 'BRICKS';\n\n    handleFire(game: GameState, position: Position) {\n        super.handleFire(game, position);\n        delete game.board[position.y][position.x].object;\n    };\n}\n\nclass SolidBlock extends GameObstacle {\n    css = 'SOLID_BLOCK';\n}\n\nclass MovableBlock extends GameObstacle {\n    css = 'MOVABLE_BLOCK';\n\n    handleFire(game: GameState, position: Position) {\n        super.handleFire(game, position);\n        game.next.push({\n            cmd: position.direction,\n            start: position,\n        });\n    };\n}\n\n\nclass AntiTankN extends GameObstacle {\n    css = 'ANTI_TANK_N';\n    dead = GameObstacles.ANTI_TANK_DEAD_N;\n    dead_direction: DIRECTION = 'S';\n\n    handleFire(game: GameState, position: Position) {\n        super.handleFire(game, position);\n        if (position.direction === this.dead_direction) {\n            game.board[position.y][position.x].object = this.dead;\n        } else {\n            game.next.push({\n                cmd: position.direction,\n                start: position,\n            });\n        }\n    }\n\n    checkTank(game: GameState, position: Position) {\n        const { tank, laser } = game;\n        const direction = reverseDirection(this.dead_direction);\n        if (laser === null && getDirection(position, tank) === direction) {\n            fireLasert(game, nextPosition({\n                ...position,\n                direction,\n            }));\n        }\n        return super.checkTank(game, position);\n    }\n}\n\nclass AntiTankS extends AntiTankN {\n    css = 'ANTI_TANK_S';\n    dead = GameObstacles.ANTI_TANK_DEAD_S;\n    dead_direction: DIRECTION = 'N';\n}\n\nclass AntiTankE extends AntiTankN {\n    css = 'ANTI_TANK_E';\n    dead = GameObstacles.ANTI_TANK_DEAD_E;\n    dead_direction: DIRECTION = 'W';\n}\n\nclass AntiTankW extends AntiTankN {\n    css = 'ANTI_TANK_W';\n    dead = GameObstacles.ANTI_TANK_DEAD_W;\n    dead_direction: DIRECTION = 'E';\n}\n\nclass AntiTankDeadN extends GameObstacle {\n    css = 'ANTI_TANK_DEAD_N';\n}\n\nclass AntiTankDeadS extends GameObstacle {\n    css = 'ANTI_TANK_DEAD_S';\n}\n\nclass AntiTankDeadW extends GameObstacle {\n    css = 'ANTI_TANK_DEAD_W';\n}\n\nclass AntiTankDeadE extends GameObstacle {\n    css = 'ANTI_TANK_DEAD_E';\n}\n\nclass MirrorNW extends GameObstacle {\n    css = 'MIRROR_NW';\n    directions: DIRECTION[] = ['N', 'W'];\n    handleFire(game: GameState, position: Position) {\n        super.handleFire(game, position);\n        const index = this.directions.indexOf(position.direction);\n        if (index !== -1) {\n            this.hitBack(game, position);\n        } else {\n            this.hitMirror(game, position);\n        }\n    }\n\n    getFireDirections(): DIRECTION[] {\n        const directionMap: {[key: string]: DIRECTION} = {\n            'N': 'S', 'S': 'N', 'W': 'E', 'E': 'W'\n        };\n        return [\n            directionMap[this.directions[0]],\n            directionMap[this.directions[1]],\n        ]\n    }\n\n    hitBack(game: GameState, position: Position) {\n        game.next.push({\n            cmd: position.direction,\n            start: position,\n        });\n    }\n\n    hitMirror(game: GameState, position: Position) {\n        const fire_directions = this.getFireDirections()\n        const direction =  this.directions[1 - fire_directions.indexOf(position.direction)];\n        game.laser = {\n            ...position,\n            direction\n        };\n    }\n}\n\nclass MirrorNE extends MirrorNW {\n    css = 'MIRROR_NE';\n    directions: DIRECTION[] = ['N', 'E'];\n}\n\nclass MirrorSE extends MirrorNW {\n    css = 'MIRROR_SE';\n    directions: DIRECTION[] = ['S', 'E'];\n}\n\nclass MirrorSW extends MirrorNW {\n    css = 'MIRROR_SW';\n    directions: DIRECTION[] = ['S', 'W'];\n}\n\nclass RotaryMirrorNW extends MirrorNW {\n    css = 'ROTARY_MIRROR_NW';\n    directions: DIRECTION[] = ['N', 'W'];\n    next_direction = GameObstacles.ROTARY_MIRROR_NE;\n\n    hitBack(game: GameState, position: Position) {\n        \n        game.board[position.y][position.x].object = this.next_direction;\n    }\n}\n\nclass RotaryMirrorNE extends RotaryMirrorNW {\n    css = 'ROTARY_MIRROR_NE';\n    directions: DIRECTION[] = ['N', 'E'];\n    next_direction = GameObstacles.ROTARY_MIRROR_SE;\n}\n\nclass RotaryMirrorSE extends RotaryMirrorNW {\n    css = 'ROTARY_MIRROR_SE';\n    directions: DIRECTION[] = ['S', 'E'];\n    next_direction = GameObstacles.ROTARY_MIRROR_SW;\n}\n\nclass RotaryMirrorSW extends RotaryMirrorNW {\n    css = 'ROTARY_MIRROR_SW';\n    directions: DIRECTION[] = ['S', 'W'];\n    next_direction = GameObstacles.ROTARY_MIRROR_NW;\n}\n\nclass CrystalBlock extends GameObstacle {\n    css = 'CRYSTAL_BLOCK';\n    handleFire(game: GameState, position: Position) { }\n}\n\nclass GameBackground extends GameObject {\n    handleTank(game: GameState, inSkipping: boolean) {}\n    shouldSkip(game: GameState) {\n        return false;\n    }\n}\n\nclass Dirt extends GameBackground {\n    css = 'DIRT';\n}\n\nclass MovableBlockWater extends GameBackground {\n    css = 'MOVABLE_BLOCK_WATER';\n}\n\nconst sameKindTunnel = (t1: Tile, t2: Tile) => {\n    return t1.background === GameBackgrounds.TUNNEL && t2.background === GameBackgrounds.TUNNEL && t1.color === t2.color;\n}\n\nclass Tunnel extends GameBackground {\n    css = 'TUNNEL';\n\n    handleMove(game: GameState, position: Position) {\n        const { board, tank, pendingTunnels } = game;\n        const tunnel = board[position.y][position.x];\n        const haveTank = sameCoord(position, tank);\n        let pending = true;\n        each(board, (row, y) => {\n            each(row, (tile, x) => {\n                if (\n                    sameKindTunnel(tile, tunnel) && \n                    !sameCoord(position, {x, y, direction: 'N'}) &&\n                    !tile.object\n                ) {\n                    if (tunnel.object) {\n                        tile.object = tunnel.object;\n                        delete tunnel.object;\n                        pending = false;\n                    } else if (haveTank) {\n                        tank.x = x;\n                        tank.y = y;\n                        pending = false;\n                    }\n                    return pending;\n                }\n            });\n            return pending;\n        });\n        if (pending) {\n            pendingTunnels.push(position);\n        }\n    }\n\n    handleEmpty(game: GameState, position: Position) { \n        super.handleEmpty(game, position);\n        const { board, pendingTunnels } = game;\n        const index = findIndex(pendingTunnels, ({ x, y }) => {\n            return sameKindTunnel(board[y][x], board[position.y][position.x]);\n        });\n        if (index > -1) {\n            const pending = pendingTunnels.splice(index, 1)[0];\n            if (!sameCoord(pending, position)) {\n                this.handleMove(game, pending);\n            }\n        }\n    }\n}\n\nclass Flag extends GameBackground {\n    css = 'FLAG';\n\n    handleMove(game: GameState, position: Position) {\n        const { tank } = game;\n        if (tank.x === position.x && tank.y === position.y) {\n            game.status = \"WIN\";\n        }\n    };\n}\n\nclass Water extends GameBackground {\n    css = 'WATER';\n\n    handleMove(game: GameState, position: Position) {\n        const { board, tank } = game;\n        const { x, y } = position;\n        const tile = board[y][x];\n        if (tile.object === GameObstacles.MOVABLE_BLOCK) {\n            tile.background = GameBackgrounds.MOVABLE_BLOCK_WATER;\n        }\n        delete tile.object;\n        if (tank.x === x && tank.y === y) {\n            game.status = 'FAIL';\n        }\n    };\n}\n\nclass Ice extends GameBackground {\n    css = 'ICE';\n\n    handleMove(game: GameState, position: Position) {\n        game.next.push({\n            cmd: position.direction,\n            start: position,\n        });\n    }\n\n    shouldSkip(game: GameState) {\n        const { board, prevTank } = game;\n        const prevBackground = GameObject.getBackground(get(board, [prevTank.y, prevTank.x]));\n        return !(prevBackground instanceof Ice);\n    }\n}\n\nclass ThinIce extends Ice {\n    css = 'THIN_ICE';\n\n    handleMove(game: GameState, position: Position) {\n        super.handleMove(game, position);\n        game.board[position.y][position.x].background = GameBackgrounds.WATER;\n    }\n}\n\nclass TankMoverN extends GameObject {\n    css = 'TANK_MOVER_N';\n    direction: DIRECTION = 'N';\n\n    handleTank(game: GameState, inSkipping: boolean) {\n        const { tank } = game;\n        const { x, y } = tank;\n        const target = nextPosition({ x, y, direction: this.direction });\n        if (tank.x === x && tank.y === y && isAvailable(target, game.board)) {\n            if (!inSkipping && this.shouldSkip(game)) {\n                game.prevTank = { ...tank };\n                tank.x = target.x;\n                tank.y = target.y;\n                GameObject.handleMove(game, game.prevTank, target);\n                GameObject.checkTank(game, true);\n            } else {\n                game.next.push({\n                    cmd: this.direction,\n                    start: {...tank},\n                });\n            }\n        }\n    }\n\n    shouldSkip(game: GameState) {\n        const { board, prevTank } = game;\n        const prevBackground = GameObject.getBackground(get(board, [prevTank.y, prevTank.x]));\n        return !(prevBackground instanceof TankMoverN);\n    }\n}\n\nclass TankMoverS extends TankMoverN {\n    css = 'TANK_MOVER_S';\n    direction: DIRECTION = 'S';\n}\n\nclass TankMoverW extends TankMoverN {\n    css = 'TANK_MOVER_W';\n    direction: DIRECTION = 'W';\n}\n\nclass TankMoverE extends TankMoverN {\n    css = 'TANK_MOVER_E';\n    direction: DIRECTION = 'E';\n}\n","import { map, each } from 'lodash';\n\nconst hex = (v: number): string => {\n    return (v < 16 ? '0' : '') + v.toString(16);\n}\n\nconst getPattern = (size: number): [number, number, number] => {\n    const n = Math.floor(Math.cbrt(size));\n    if (n > 255) {\n        return [255, 255, 255];\n    }\n    size -= n * n * n;\n    const pattern: [number, number, number] = [n, n, n];\n    if (size === 0) {\n        return pattern;\n    }\n    pattern[0] += 1;\n    if (size <= n * n) {\n        return pattern;\n    }\n    pattern[1] += 1;\n    if (size <= 2 * n * n + n) {\n        return pattern;\n    }\n    pattern[2] += 1;\n    return pattern;\n}\n\nexport const getColors = (size: number): string[] => {\n    const pattern = getPattern(size);\n\n    const rgbs = map(pattern, (p) => {\n        const colors = [];\n        let color = 0;\n        p -= 1;\n        if (p > 0) {\n            const diff = 255 / p;\n            while (color < 255) {\n                colors.push(Math.floor(color));\n                color += diff;\n            }\n        }\n        colors.push(255);\n        return colors;\n    });\n\n    const results: string[] = [];\n    // const available = rgbs[0].length * rgbs[1].length * rgbs[2].length;\n    // const redundant = Math.ceil(available / (available - size + 1));\n    // let count = 0;\n    each(rgbs[0], (r) => {\n        each(rgbs[1], (g) => {\n            each(rgbs[2], (b) => {\n                // if (count % redundant !== 0) {\n                results.push(`${hex(r)}${hex(g)}${hex(b)}`);\n                // }\n                // count += 1;\n            });\n        });\n    });\n    return results;\n}\n\n","import { GameBackgrounds, GameObstacles } from './tiles';\n\nexport const saveDataMap: {[key: number]: any} = {\n    0: {\n        background: GameBackgrounds.DIRT,\n    },\n    2: {\n        background: GameBackgrounds.FLAG,\n    },\n    3: {\n        background: GameBackgrounds.WATER,\n    },\n    4: {\n        object: GameObstacles.SOLID_BLOCK,\n    },\n    5: {\n        object: GameObstacles.MOVABLE_BLOCK, ///////\n    },\n    6: {\n        object: GameObstacles.BRICKS,\n    },\n    7: {\n        object: GameObstacles.ANTI_TANK_N\n    },\n    8: {\n        object: GameObstacles.ANTI_TANK_E\n    },\n    9: {\n        object: GameObstacles.ANTI_TANK_S\n    },\n    10: {\n        object: GameObstacles.ANTI_TANK_W\n    },\n    11: {\n        object: GameObstacles.MIRROR_NW\n    },\n    12: {\n        object: GameObstacles.MIRROR_NE\n    },\n    13: {\n        object: GameObstacles.MIRROR_SE\n    },\n    14: {\n        object: GameObstacles.MIRROR_SW\n    },\n    15: {\n        background: GameBackgrounds.TANK_MOVER_N\n    },\n    16: {\n        background: GameBackgrounds.TANK_MOVER_E\n    },\n    17: {\n        background: GameBackgrounds.TANK_MOVER_S\n    },\n    18: {\n        background: GameBackgrounds.TANK_MOVER_W\n    },\n    19: {\n        object: GameObstacles.CRYSTAL_BLOCK\n    },\n    20: {\n        object: GameObstacles.ROTARY_MIRROR_NW\n    },\n    21: {\n        object: GameObstacles.ROTARY_MIRROR_NE\n    },\n    22: {\n        object: GameObstacles.ROTARY_MIRROR_SE\n    },\n    23: {\n        object: GameObstacles.ROTARY_MIRROR_SW\n    },\n    24: {\n        background: GameBackgrounds.ICE\n    },\n    25: {\n        background: GameBackgrounds.THIN_ICE,\n    },\n}\n","import { get, map, range, sum, chunk } from 'lodash';\nimport { createSlice, PayloadAction  } from '@reduxjs/toolkit';\nimport { AppThunk } from '../../app/store';\n\nimport { getColors } from '../../utils/colors';\nimport { \n    nextPosition, sameCoord, isAvailable, Board, Position, GameObject, GameBackgrounds\n} from './tiles';\nimport { saveDataMap } from './consts';\n\nexport const BOARD_SIZE = 16;\n\ninterface TLEVEL {\n    board: number[][],\n    levelName: string,\n    hint: string,\n    author: string,\n    scoreDifficulty: number,\n}\ninterface NextAction {\n    cmd: CMD, start: Position\n}\n\nexport type DIRECTION = 'N'|'S'|'W'|'E';\nexport type CMD = DIRECTION | 'FIRE' | 'UNDO';\n\nexport interface PlayField {\n    board: Board,\n    tank: Position,\n    prevTank: Position,\n    laser: Position | null,\n    status: Status,\n    pendingTunnels: Position[],\n}\n\nexport interface GameState {\n    board: Board,\n    tank: Position,\n    prevTank: Position,\n    laser: Position | null,\n    status: Status,\n    pendingTunnels: Position[],\n    next: NextAction[],\n    timer: number,\n    levels: TLEVEL[],\n    levelIndex: number,\n};\n\ntype Status = \"WIN\" | \"FAIL\" | \"PLAYING\"\n\nconst isDirection = (cmd: string): cmd is DIRECTION => {\n    return ['N', 'S', 'W', 'E'].includes(cmd);\n}\n\nclass DB {\n    record: CMD[] = [];\n    history: PlayField[] = [];\n\n    save(state: GameState, cmd: CMD) {\n        const { board, tank, prevTank, laser, status, pendingTunnels } = state;\n        this.record.push(cmd);\n        this.history.push({ board, tank, prevTank, laser, status, pendingTunnels });\n    }\n}\n\nconst db = new DB();\n\nconst initialState: GameState = {\n    board: range(0, BOARD_SIZE).map(() => {\n        return range(0, BOARD_SIZE).map(() => {\n            return {\n                background: GameBackgrounds.DIRT,\n            };\n        });\n    }),\n    tank: {x: 0, y: 0, direction: 'N'}, \n    prevTank: {x: 0, y: 0, direction: 'N'}, \n    laser: null,\n    status: \"PLAYING\",\n    pendingTunnels: [],\n    timer: 0,\n    next: [],\n    levels: [],\n    levelIndex: 0,\n};\n\nconst gameSlice = createSlice({\n    name: 'game',\n    initialState,\n    reducers: {\n        loadLevels(state, action: PayloadAction<TLEVEL[]>) {\n            state.levels = action.payload;\n            localStorage.setItem('levels', JSON.stringify(action.payload));\n            gameSlice.caseReducers.loadLevel(state, loadLevel(0));\n        },\n        loadLevel(state, action: PayloadAction<number>) {\n            const { tank, board, levels } = state;\n            const levelIndex = action.payload;\n            const level = get(levels, [levelIndex]);\n            if (!level) {\n                return;\n            }\n            const colors = getColors(9);\n            colors.shift(); // old lasertank doesn't use back tunnels\n\n            state.levelIndex = levelIndex;\n            level.board.forEach((row, i) => {\n                return row.forEach((cell, j) => {\n                    if (cell === 1) {\n                        tank.x = i;\n                        tank.y = j;\n                        board[j][i] = {\n                            background: GameBackgrounds.DIRT,\n                        }\n                    } else if (cell > 63 && cell < 72) {\n                        board[j][i] = {\n                            color: colors[cell - 64],\n                            background: GameBackgrounds.TUNNEL,\n                        };\n                    } else {\n                        const result = saveDataMap[cell];\n                        if (!result) {\n                            console.log(cell);\n                        }\n                        board[j][i] = {\n                            background: GameBackgrounds.DIRT,\n                            ...result,\n                        };\n                    }\n                });\n            });\n            state.timer += 1;\n            state.status = 'PLAYING';\n        },\n        changeDirection(state, action: PayloadAction<DIRECTION>) {\n            state.tank.direction = action.payload;\n        },\n        move(state, action: PayloadAction<Position>) {\n            const { x, y } = action.payload;\n            const target = nextPosition(action.payload);\n            const { tank, board } = state;\n            if (isAvailable(target, board)) {\n                if (board[y][x].object) {\n                    board[target.y][target.x].object = board[y][x].object;\n                    delete board[y][x].object;\n                } else if (tank.x === x && tank.y === y) {\n                    tank.x = target.x;\n                    tank.y = target.y;\n                }\n                GameObject.handleMove(state, action.payload, target);\n            }\n        },\n        fire(state, action: PayloadAction<NextAction>) {\n            const { tank, board } = state;\n            const { start } = action.payload;\n            const { x, y } = start;\n            const tile = get(board, [y, x]);\n            if (tile) {\n                if (sameCoord(start, tank)) {\n                    state.status = 'FAIL';\n                } else {\n                    state.laser = start;\n                    GameObject.handleFire(state, start);\n                }\n            } else {\n                state.laser = null;\n            }\n        },\n        undo(state) {\n            return {\n                ...state,\n                ...(db.history.pop()),\n                timer: state.timer + 1,\n            };\n        },\n        moveTank(state, action: PayloadAction<DIRECTION>) {\n            const { tank } = state;\n            const cmd = action.payload;\n            if (tank.direction === cmd) {\n                const from = {...tank};\n                const target = nextPosition(tank);\n                state.prevTank = from;\n                tank.x = target.x;\n                tank.y = target.y;\n                GameObject.handleMove(state, from, target);\n                GameObject.checkTank(state);\n            } else {\n                tank.direction = cmd;\n            }\n            state.timer += 1;\n        },\n        renderFrame(state, action: PayloadAction<NextAction | null>) {\n            const { tank, board, next } = state;\n            state.next = [];\n            state.prevTank = { ...tank };\n            if (action?.payload) {\n                next.push(action.payload);\n            }\n            next.forEach((n) => {\n                const { cmd, start } = n;\n                const { x, y } = start;\n                if (isDirection(cmd)) {\n                    const from = { x, y, direction: cmd };\n                    const target = nextPosition(from);\n\n                    if (isAvailable(target, board)) {\n                        if (board[y][x].object) {\n                            board[target.y][target.x].object = board[y][x].object;\n                            delete board[y][x].object;\n                        } else if (sameCoord(tank, from)) {\n                            tank.x = target.x;\n                            tank.y = target.y;\n                        }\n                        GameObject.handleMove(state, from, target);\n                    }\n                } else if (cmd === 'FIRE') {\n                    const tile = get(board, [y, x]);\n                    if (tile) {\n                        if (sameCoord(start, tank)) {\n                            state.status = 'FAIL';\n                        } else {\n                            state.laser = { ...start };\n                            GameObject.handleFire(state, state.laser);\n                        }\n                    } else {\n                        state.laser = null;\n                    }\n                }\n            });\n            GameObject.checkTank(state);\n            const laser = state.laser;\n            if (laser) {\n                if (sameCoord(laser, tank)) {\n                    state.status = 'FAIL';\n                } else {\n                    const target = nextPosition(laser);\n                    state.next.push({\n                        cmd: 'FIRE',\n                        start: target,\n                    });\n                }\n            }\n            state.timer += 1\n        },\n    },\n});\n\nexport const {\n    loadLevel, loadLevels, move, fire, undo, changeDirection, renderFrame, moveTank\n} = gameSlice.actions;\n\nexport const exec = (cmd: string): AppThunk => (dispatch, getState) => {\n    const { game } = getState();\n    const { tank, board, status, next, levelIndex } = game;\n    if (cmd === 'UNDO') {\n        dispatch(undo());\n    } else if (cmd === 'NEXT_LEVEL') {\n        dispatch(loadLevel(levelIndex + 1));\n    } else if (cmd === 'PREV_LEVEL') {\n        dispatch(loadLevel(levelIndex - 1));\n    } else if (next.length === 0 && status === 'PLAYING') {\n        const target = nextPosition(tank);\n        if (cmd === 'FIRE') {\n            db.save(game, cmd);\n            dispatch(renderFrame({ cmd, start: target }));\n        } else if (isDirection(cmd)) {\n            if (tank.direction === cmd) {\n                if (isAvailable(target, board)) {\n                    db.save(game, cmd);\n                    dispatch(moveTank(cmd));\n                }\n            } else {\n                dispatch(moveTank(cmd));\n            }\n        }\n    }\n};\n\nexport const openDataFile = (buffer: ArrayBuffer): AppThunk => (dispatch) => {\n    const tLevel = {\n        board: 16 * 16,\n        levelName: 31,\n        hint: 256,\n        author: 31,\n        scoreDifficulty: 2,\n    }; // 576\n    const sizeOfTLevel = sum(Object.values(tLevel));\n\n    const levels = map(range(Math.floor(buffer.byteLength / sizeOfTLevel)), (i): TLEVEL => {\n        let cursor = sizeOfTLevel * i;\n        const data: any = {};\n        map(tLevel, (size, key) => {\n            data[key] = buffer.slice(cursor, cursor + size);\n            cursor += size;\n        });\n        return {\n            board: chunk(Array.from(new Uint8Array(data.board)), 16),\n            levelName: String.fromCharCode.apply(null, Array.from(new Uint8Array(data.levelName))),\n            hint: String.fromCharCode.apply(null, Array.from(new Uint8Array(data.hint))),\n            author: String.fromCharCode.apply(null, Array.from(new Uint8Array(data.author))),\n            scoreDifficulty: new Uint16Array(data.scoreDifficulty)[0],\n        }\n    });\n    dispatch(loadLevels(levels));\n};\n\nexport default gameSlice.reducer;\n","import { map, min, range, bindAll, debounce } from 'lodash';\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { RootState } from '../../app/rootReducer';\nimport { BOARD_SIZE, CMD, exec, renderFrame, GameState, loadLevel } from './game';\nimport { Tile, GameBackgrounds, GameObject } from './tiles';\n\nimport './Board.css';\n\ninterface BoardProps {\n    game: GameState,\n}\n\ninterface BoardState {\n    limit: number,\n}\n\nconst BoardTile = React.memo(({ tile, tileSize }: { tile: Tile, tileSize: number }) => {\n    return <div style={{ width: tileSize, height: tileSize }} className={[\n        'board-object',\n        GameObject.getBackgroundCss(tile),\n    ].filter(Boolean).join(' ')}>\n        {tile.background === GameBackgrounds.TUNNEL && <div style={{ \n            background: 'transparent',\n            borderRadius: '50%',\n            border: `${tileSize/8}px solid #${tile.color}`,\n            boxSizing: 'border-box',\n        }}/>}\n        {tile.object && <div className={GameObject.getObstacleCss(tile)}/>} \n    </div>\n});\n\nconst BoardRow = React.memo(({ row, tileSize }: {row: Tile[], tileSize: number}) => {\n    return <div className=\"row\">\n        {map(row, (tile, j) => {\n            return <BoardTile key={j} tile={tile} tileSize={tileSize}/>\n        })}\n    </div>\n})\n\nclass Board extends React.Component<BoardProps, BoardState> {\n    state = { limit: 0 };\n    boardRef = React.createRef<HTMLInputElement>();\n    interval!: NodeJS.Timeout;\n\n    constructor(props: BoardProps) {\n        super(props)\n        bindAll(this, ['handleResize']);\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', this.handleResize);\n        const animations = ['bg0', 'bg1', 'bg2'];\n        this.interval = setInterval(async () => {\n            const el = this.boardRef.current;\n            if (el) {\n                const backgrounds = el.querySelectorAll([\n                    '.ANTI_TANK_N', '.ANTI_TANK_E', '.ANTI_TANK_S', '.ANTI_TANK_W',\n                    '.TANK_MOVER_N', '.TANK_MOVER_S', '.TANK_MOVER_W', '.TANK_MOVER_E',\n                    '.FLAG', '.WATER',\n                ].join(', '));\n                const bg = animations.shift() || '';\n                backgrounds.forEach((background) => {\n                    background.classList.remove(...animations);\n                    background.classList.add(bg);\n                });\n                animations.push(bg);\n            }\n        }, 600);\n        this.handleResize();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleResize);\n        clearInterval(this.interval);\n    }\n\n    handleResize() {\n        if (this.boardRef.current) {\n            const { offsetWidth: width, offsetHeight: height } = this.boardRef.current;\n            this.setState({ limit: min([width, height]) ?? 0 });\n        }\n    }\n\n    shouldComponentUpdate(nextProps: BoardProps, nextState: BoardState) {\n        return nextProps.game.timer !== this.props.game.timer ||\n            nextState.limit !== this.state.limit\n        ;\n    }\n\n    render() {\n        const { game } = this.props;\n        const { limit } = this.state;\n        const { board, tank, laser } = game;\n        const tileSize = Math.floor(limit / (BOARD_SIZE + 2));\n        const tileStyle = { width: tileSize, height: tileSize };\n        return <div ref={this.boardRef} className=\"Board\">\n            <div>\n                {map([\n                    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P'\n                ], (letter, i) => {\n                    return <div key={i} style={{ width: tileSize, display: 'inline-block' }}>{letter}</div>\n                })}\n            </div>\n            <div style={{\n                width: tileSize * BOARD_SIZE, height: tileSize * BOARD_SIZE, margin: '0 auto'\n            }}>\n                {map(board, (row, i) => {\n                    return <BoardRow key={i} row={row} tileSize={tileSize}/>\n                })}\n                {map(range(BOARD_SIZE), (i) => {\n                    return <div key={i} style={{\n                        position: 'absolute', verticalAlign: 'center', lineHeight: `${tileSize}px`,\n                        left: -tileSize, top: i * tileSize\n                    }}>{i + 1}</div>\n                })}\n                <div className={`tank TANK_${tank.direction}`} style={{ \n                    left: tank.x * tileSize, top: tank.y * tileSize, ...tileStyle\n                }}/>\n                {laser && <div className={`laser ${laser.direction}`} \n                    style={['N', 'S'].includes(laser.direction) ? { \n                        left: laser.x * tileSize + (tileSize / 2 - 2), \n                        top: laser.y * tileSize, \n                        ...tileStyle, width: 4,\n                    } : {\n                        left: laser.x * tileSize, \n                        top: laser.y * tileSize + (tileSize / 2 - 1), \n                        ...tileStyle, height: 4,\n                    }}\n                />}\n            </div>\n        </div>\n    }\n}\n\nexport default () => {\n    const game = useSelector((state: RootState) => state.game)\n    const dispatch = useDispatch();\n    const { next, status, levelIndex } = game;\n    const debounceRenderFrame = debounce(() => {\n        return dispatch(renderFrame(null));\n    }, 10);\n\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            const cmdMap: {[key: string]: CMD} = {\n                ArrowUp: 'N',\n                ArrowDown: 'S',\n                ArrowLeft: 'W',\n                ArrowRight: 'E',\n                'u': 'UNDO',\n                'U': 'UNDO',\n                ' ': 'FIRE',\n            };\n            const cmd = cmdMap[e.key];\n            if (cmd) {\n                dispatch(exec(cmd));\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [dispatch]);\n\n    useEffect(() => {\n        if (next.length > 0 && status !== 'FAIL') {\n            debounceRenderFrame();\n        }\n    }, [debounceRenderFrame, next, status]);\n\n    useEffect(() => {\n        if (status === 'WIN') {\n            dispatch(loadLevel(levelIndex + 1));\n        }\n    }, [dispatch, levelIndex, status])\n\n    return <Board game={game}/>\n}","import { map } from 'lodash';\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { openDataFile } from '../../features/game/game';\n\nimport './MenuBar.css';\n\nexport default () => {\n    const dispatch = useDispatch();\n    const [currentMenu, setMenu] = useState<null|{ menu: any, top: number, left: number}>(null);\n\n    const handleFile = (file: File) => {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            console.log(e.target?.result);\n            if (e.target?.result) {\n                dispatch(openDataFile(e.target?.result as ArrayBuffer));\n            }\n        };\n        reader.readAsArrayBuffer(file);\n    }\n\n    return <div className=\"MenuBar\">\n        {map([\n            {\n                name: 'Game',\n                items: [\n                    {\n                        render: () => {\n                            return <div>\n                                <label>\n                                    Open Data File\n                                    <input id=\"fileInput\" type=\"file\" \n                                        style={{display: 'none'}} \n                                        onChange={(e) => {\n                                            const files = e.currentTarget.files;\n                                            if (files?.length) {\n                                                handleFile(files[0]);\n                                            }\n                                            setMenu(null);\n                                        }}\n                                    />\n                                </label>\n                            </div>\n                        },\n                    },\n                ],\n            },\n            {\n                name: 'Options',\n                items: [\n                    {name: 'Animation'},\n                    // {name: 'Sound'},\n                ],\n            },\n            {\n                name: 'Editor', \n                onClick: () => {\n                    setMenu(null);\n                },\n            },\n            {\n                name: 'Help',\n                items: [\n                    {name: 'About'},\n                ],\n            },\n        ], (menu, i) => {\n            const { name, ...props } = menu;\n            return <div key={i}\n                className={`MenuBarItem ${name === currentMenu?.menu.name ? 'active ' : ''}`} \n                onClick={(event) => {\n                    const { offsetTop, offsetHeight, offsetLeft } = event.currentTarget;\n                    setMenu(currentMenu ? null : {\n                        menu,\n                        top: offsetTop + offsetHeight,\n                        left: offsetLeft,\n                    });\n                }}\n                onMouseEnter={(event) => {\n                    const { offsetTop, offsetHeight, offsetLeft } = event.currentTarget;\n                    if (currentMenu) {\n                        setMenu({\n                            menu,\n                            top: offsetTop + offsetHeight,\n                            left: offsetLeft,\n                        });\n                    }\n                }}\n                {...props}\n            >{name}</div>\n        })}\n        {<ul className=\"Menu\" style={!currentMenu?.menu.items ? {display: 'none'} : {\n            top: currentMenu.top,\n            left: currentMenu.left,\n        }}>\n            {map(currentMenu?.menu.items, ({ name, render }, i) => {\n                return <li key={i}>\n                    {render ? render() : name}\n                </li>;\n            })}\n        </ul>}\n    </div>\n}","import { map } from 'lodash';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport './App.css';\nimport { exec, loadLevels } from '../features/game/game';\nimport Board from '../features/game/Board';\nimport MenuBar from '../features/ui/MenuBar';\n\nconst App: React.FC = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const levels = localStorage.getItem('levels');\n    if (levels) {\n      dispatch(loadLevels(JSON.parse(levels)));\n    }\n  }, [dispatch]);\n\n  return (\n    <div className=\"App\">\n      <MenuBar/>\n      <div className=\"main\">\n        <Board/>\n        <div className=\"control-panel\">\n          <div className=\"info\"></div>\n          <div className=\"control\">\n            {map([\n              [{name: 'Undo', cmd: 'UNDO'}, {name: 'Hint', cmd: 'HINT'}],\n              [{name: 'Save Position', cmd: ''}],\n              [{name: 'Restore Position', cmd: ''}],\n              [{name: 'New', cmd: ''}, {name: 'Restart', cmd: ''}],\n              [{name: 'Load Level', cmd: ''}],\n              [{name: '<< Level', cmd: 'PREV_LEVEL'}, {name: 'Level >>', cmd: 'NEXT_LEVEL'}],\n            ], (row, i) => {\n              return <div key={i}>\n                {map(row, ({name, cmd}, j) => {\n                  return <div key={j} onClick={() => {\n                    if (cmd) {\n                      dispatch(exec(cmd))\n                    }\n                  }}>{name}</div>\n                })}\n              </div>\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from '@reduxjs/toolkit'\n\nimport gameSlice from '../features/game/game';\n\nconst rootReducer = combineReducers({\n    game: gameSlice,\n});\n\n\nexport type RootState = ReturnType<typeof rootReducer>\n\nexport default rootReducer\n","import { configureStore, Action } from '@reduxjs/toolkit';\nimport { ThunkAction } from 'redux-thunk';\n\nimport rootReducer, { RootState } from './rootReducer';\n\n\nconst store = configureStore({\n    reducer: rootReducer\n});\n\nexport type AppThunk = ThunkAction<void, RootState, null, Action<string>>\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport './index.css';\nimport App from './app/App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './app/store';\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}