(this.webpackJsonplasertank=this.webpackJsonplasertank||[]).push([[0],{29:function(e,t,n){e.exports=n(49)},38:function(e,t,n){},39:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),i=n.n(r),o=n(15),l=n.n(o),s=n(10),u=(n(38),n(39),n(8)),O=n(2),b=n(4),d=n(7),h=n(3),f=n(14),j=n(9),v=n(5),R=n(1),_=n(6);!function(e){e[e.FLAG=1]="FLAG",e[e.DIRT=2]="DIRT",e[e.WATER=3]="WATER",e[e.MOVABLE_BLOCK_WATER=4]="MOVABLE_BLOCK_WATER",e[e.ICE=5]="ICE",e[e.THIN_ICE=6]="THIN_ICE",e[e.TANK_MOVER_N=7]="TANK_MOVER_N",e[e.TANK_MOVER_S=8]="TANK_MOVER_S",e[e.TANK_MOVER_E=9]="TANK_MOVER_E",e[e.TANK_MOVER_W=10]="TANK_MOVER_W",e[e.TUNNEL=11]="TUNNEL"}(a||(a={})),function(e){e[e.BRICKS=32]="BRICKS",e[e.SOLID_BLOCK=33]="SOLID_BLOCK",e[e.CRYSTAL_BLOCK=34]="CRYSTAL_BLOCK",e[e.MOVABLE_BLOCK=35]="MOVABLE_BLOCK",e[e.ANTI_TANK_N=36]="ANTI_TANK_N",e[e.ANTI_TANK_S=37]="ANTI_TANK_S",e[e.ANTI_TANK_W=38]="ANTI_TANK_W",e[e.ANTI_TANK_E=39]="ANTI_TANK_E",e[e.ANTI_TANK_DEAD_N=40]="ANTI_TANK_DEAD_N",e[e.ANTI_TANK_DEAD_S=41]="ANTI_TANK_DEAD_S",e[e.ANTI_TANK_DEAD_W=42]="ANTI_TANK_DEAD_W",e[e.ANTI_TANK_DEAD_E=43]="ANTI_TANK_DEAD_E",e[e.MIRROR_NW=44]="MIRROR_NW",e[e.MIRROR_NE=45]="MIRROR_NE",e[e.MIRROR_SE=46]="MIRROR_SE",e[e.MIRROR_SW=47]="MIRROR_SW",e[e.ROTARY_MIRROR_NW=48]="ROTARY_MIRROR_NW",e[e.ROTARY_MIRROR_NE=49]="ROTARY_MIRROR_NE",e[e.ROTARY_MIRROR_SE=50]="ROTARY_MIRROR_SE",e[e.ROTARY_MIRROR_SW=51]="ROTARY_MIRROR_SW"}(c||(c={}));var T,A=function(e,t){return e.x===t.x&&e.y===t.y},y=function(e,t){if(e.x!==t.x||e.y!==t.y){if(e.x===t.x)return e.y>t.y?T.UP:T.DOWN;if(e.y===t.y)return e.x>t.x?T.LEFT:T.RIGHT}return null},E=function(e){var t;return(t={},Object(O.a)(t,T.UP,T.DOWN),Object(O.a)(t,T.DOWN,T.UP),Object(O.a)(t,T.LEFT,T.RIGHT),Object(O.a)(t,T.RIGHT,T.LEFT),t)[e]},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(null===e.laser||n)&&(e.laser=t,A(t,e.tank)&&(e.status="FAIL"))},g=function(e,t){var n=e.x,a=e.y,c=Object(h.get)(t,"".concat(a,".").concat(n));return!(!c||c.object)},p=function(e){var t,n=e.x,a=e.y,c=e.direction;return(t={},Object(O.a)(t,T.UP,{x:n,y:a-1,direction:c}),Object(O.a)(t,T.DOWN,{x:n,y:a+1,direction:c}),Object(O.a)(t,T.RIGHT,{x:n+1,y:a,direction:c}),Object(O.a)(t,T.LEFT,{x:n-1,y:a,direction:c}),t)[c]},I=function(){function e(){Object(b.a)(this,e),this.css=""}return Object(d.a)(e,[{key:"handleLeaving",value:function(e,t){}},{key:"pending",value:function(e,t,n){e.pending.push({from:t,to:n})}}],[{key:"getBackgroundClass",value:function(e){var t;return(t={},Object(O.a)(t,a.FLAG,ee),Object(O.a)(t,a.DIRT,q),Object(O.a)(t,a.WATER,te),Object(O.a)(t,a.MOVABLE_BLOCK_WATER,$),Object(O.a)(t,a.ICE,ne),Object(O.a)(t,a.THIN_ICE,ae),Object(O.a)(t,a.TANK_MOVER_N,ce),Object(O.a)(t,a.TANK_MOVER_S,re),Object(O.a)(t,a.TANK_MOVER_E,oe),Object(O.a)(t,a.TANK_MOVER_W,ie),Object(O.a)(t,a.TUNNEL,Z),t)[e]}},{key:"getObstacleClass",value:function(e){var t;return(t={},Object(O.a)(t,c.BRICKS,m),Object(O.a)(t,c.SOLID_BLOCK,L),Object(O.a)(t,c.CRYSTAL_BLOCK,J),Object(O.a)(t,c.MOVABLE_BLOCK,M),Object(O.a)(t,c.ANTI_TANK_N,K),Object(O.a)(t,c.ANTI_TANK_S,x),Object(O.a)(t,c.ANTI_TANK_W,S),Object(O.a)(t,c.ANTI_TANK_E,D),Object(O.a)(t,c.ANTI_TANK_DEAD_N,W),Object(O.a)(t,c.ANTI_TANK_DEAD_S,w),Object(O.a)(t,c.ANTI_TANK_DEAD_W,F),Object(O.a)(t,c.ANTI_TANK_DEAD_E,B),Object(O.a)(t,c.MIRROR_NW,C),Object(O.a)(t,c.MIRROR_NE,U),Object(O.a)(t,c.MIRROR_SE,P),Object(O.a)(t,c.MIRROR_SW,V),Object(O.a)(t,c.ROTARY_MIRROR_NW,H),Object(O.a)(t,c.ROTARY_MIRROR_NE,Y),Object(O.a)(t,c.ROTARY_MIRROR_SE,G),Object(O.a)(t,c.ROTARY_MIRROR_SW,z),t)[e]}},{key:"getBackground",value:function(e){return new(this.getBackgroundClass(e.background))}},{key:"getObstacle",value:function(e){return e.object?new(this.getObstacleClass(e.object)):null}},{key:"checkLaser",value:function(e){var t=e.laser,n=e.tank,a=e.board;if(t){var c,r=p(t),i=Object(h.get)(a,[r.y,r.x]);if(i)if(e.laser=r,A(r,n))e.status="FAIL";else null===(c=this.getObstacle(i))||void 0===c||c.handleLaser(e,r);else e.laser=null;e.laser||this.checkFire(e)}}},{key:"checkPending",value:function(e){var t=this,n=e.board,a=e.pending;"FAIL"!==e.status&&(e.pending=[],Object(h.each)(Object(h.sortBy)(a,[function(e){return e.to.y},function(e){return e.to.x}]),(function(a){var c=a.from,r=a.to,i=Object(h.get)(n,[r.y,r.x]);if(t.getBackground(i).handleLanding(e,c,r),c){var o=Object(h.get)(n,[c.y,c.x]);o.object||t.getBackground(o).handleLeaving(e,c)}return"FAIL"!==e.status})))}},{key:"checkTank",value:function(e){var t=e.board,n=e.tank;t[n.y][n.x].object||"FAIL"===e.status||(this.checkFire(e),this.getBackground(t[n.y][n.x]).handleTank(e,!1))}},{key:"checkFire",value:function(e){var t=this,n=e.board,a=e.tank;n[a.y][a.x].object||"FAIL"===e.status||Object(h.each)([T.RIGHT,T.DOWN,T.LEFT,T.UP],(function(c){return function(e,t,n){for(var a=p(t);a.x<se&&a.y<se&&a.x>=0&&a.y>=0&&!1!==n(e[a.y][a.x],a);)a=p(a)}(n,Object(u.a)({},a,{direction:c}),(function(n,a){var c;return null===(c=t.getObstacle(n))||void 0===c?void 0:c.sawTank(e,a)})),"FAIL"!==e.status}))}},{key:"moveTank",value:function(t,n){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.board,i=t.tank,o=r[n.y][n.x],l=e.getBackground(o);t.prevTank=Object(u.a)({},i),g(n,t.board)&&(i.x=n.x,i.y=n.y,t.rendering=!0,o.background===a.TUNNEL&&l.handleTankMove(t),e.checkFire(t),c&&"FAIL"!==t.status&&l.handleTank(t,!1))}},{key:"getObstacleCss",value:function(e){var t;return null===(t=this.getObstacle(e))||void 0===t?void 0:t.css}},{key:"getBackgroundCss",value:function(e){var t;return null===(t=this.getBackground(e))||void 0===t?void 0:t.css}}]),e}(),k=function(e){function t(){return Object(b.a)(this,t),Object(v.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLaser",value:function(e,t){e.laser=null}},{key:"sawTank",value:function(e,t){return!1}},{key:"handleMove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.board,c=e.pending,r=a[t.y][t.x];n||(n=p(t));var i=c.findIndex((function(e){return A(e.to,t)}));if(i>-1&&c.splice(i,1),r.object&&g(n,a)){var o=Object(h.get)(a,[n.y,n.x]);o.object=r.object,delete r.object,I.getBackground(o).pending(e,t,n)}}}]),t}(I),m=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="BRICKS",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLaser",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleLaser",this).call(this,e,n),delete e.board[n.y][n.x].object}}]),t}(k),L=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="SOLID_BLOCK",n}return Object(_.a)(t,e),t}(k),M=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="MOVABLE_BLOCK",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLaser",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleLaser",this).call(this,e,n),this.handleMove(e,n)}}]),t}(k),K=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ANTI_TANK_N",n.dead=c.ANTI_TANK_DEAD_N,n.dead_direction=T.DOWN,n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLaser",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleLaser",this).call(this,e,n),n.direction===this.dead_direction?e.board[n.y][n.x].object=this.dead:this.handleMove(e,n)}},{key:"sawTank",value:function(e,n){var a=e.tank,c=E(this.dead_direction);return y(n,a)===c&&N(e,p(Object(u.a)({},n,{direction:c}))),Object(j.a)(Object(R.a)(t.prototype),"sawTank",this).call(this,e,n)}}]),t}(k),x=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ANTI_TANK_S",n.dead=c.ANTI_TANK_DEAD_S,n.dead_direction=T.UP,n}return Object(_.a)(t,e),t}(K),D=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ANTI_TANK_E",n.dead=c.ANTI_TANK_DEAD_E,n.dead_direction=T.LEFT,n}return Object(_.a)(t,e),t}(K),S=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ANTI_TANK_W",n.dead=c.ANTI_TANK_DEAD_W,n.dead_direction=T.RIGHT,n}return Object(_.a)(t,e),t}(K),W=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="ANTI_TANK_DEAD_N",n}return Object(_.a)(t,e),t}(k),w=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="ANTI_TANK_DEAD_S",n}return Object(_.a)(t,e),t}(k),F=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="ANTI_TANK_DEAD_W",n}return Object(_.a)(t,e),t}(k),B=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="ANTI_TANK_DEAD_E",n}return Object(_.a)(t,e),t}(k),C=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="MIRROR_NW",n.directions=[T.UP,T.LEFT],n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLaser",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleLaser",this).call(this,e,n),-1!==this.directions.indexOf(n.direction)?this.hitBack(e,n):this.hitMirror(e,n)}},{key:"getFireDirections",value:function(){return[E(this.directions[0]),E(this.directions[1])]}},{key:"hitBack",value:function(e,t){this.handleMove(e,t)}},{key:"hitMirror",value:function(e,t){var n=this.getFireDirections(),a=this.directions[1-n.indexOf(t.direction)];N(e,Object(u.a)({},t,{direction:a}),!0)}}]),t}(k),U=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="MIRROR_NE",n.directions=[T.UP,T.RIGHT],n}return Object(_.a)(t,e),t}(C),P=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="MIRROR_SE",n.directions=[T.DOWN,T.RIGHT],n}return Object(_.a)(t,e),t}(C),V=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="MIRROR_SW",n.directions=[T.DOWN,T.LEFT],n}return Object(_.a)(t,e),t}(C),H=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ROTARY_MIRROR_NW",n.directions=[T.UP,T.LEFT],n.next_direction=c.ROTARY_MIRROR_NE,n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"hitBack",value:function(e,t){e.board[t.y][t.x].object=this.next_direction}}]),t}(C),Y=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ROTARY_MIRROR_NE",n.directions=[T.UP,T.RIGHT],n.next_direction=c.ROTARY_MIRROR_SE,n}return Object(_.a)(t,e),t}(H),G=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ROTARY_MIRROR_SE",n.directions=[T.DOWN,T.RIGHT],n.next_direction=c.ROTARY_MIRROR_SW,n}return Object(_.a)(t,e),t}(H),z=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).css="ROTARY_MIRROR_SW",n.directions=[T.DOWN,T.LEFT],n.next_direction=c.ROTARY_MIRROR_NW,n}return Object(_.a)(t,e),t}(H),J=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="CRYSTAL_BLOCK",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLaser",value:function(e,t){}}]),t}(k),X=function(e){function t(){return Object(b.a)(this,t),Object(v.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLanding",value:function(e,t,n){}},{key:"handleTank",value:function(e,t){}},{key:"handleTankMove",value:function(e){}},{key:"shouldSkip",value:function(e,t){return!1}}]),t}(I),q=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="DIRT",n}return Object(_.a)(t,e),t}(X),$=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="MOVABLE_BLOCK_WATER",n}return Object(_.a)(t,e),t}(X),Q=function(e,t){return e.background===a.TUNNEL&&t.background===a.TUNNEL&&e.color===t.color},Z=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="TUNNEL",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLanding",value:function(e,n,a){Object(j.a)(Object(R.a)(t.prototype),"handleLanding",this).call(this,e,n,a);var c=e.board,r=c[a.y][a.x],i=!0;Object(h.each)(c,(function(e,t){return Object(h.each)(e,(function(e,n){if(Q(e,r)&&!A(a,{x:n,y:t,direction:T.UP})&&!e.object)return e.object=r.object,delete r.object,i=!1})),i})),i&&e.pendingTunnels.push(a)}},{key:"handleTankMove",value:function(e){Object(j.a)(Object(R.a)(t.prototype),"handleTankMove",this).call(this,e);var n=e.board,a=e.tank,c=n[a.y][a.x],r=!0;Object(h.each)(n,(function(e,t){return Object(h.each)(e,(function(e,n){if(Q(e,c)&&!A(a,{x:n,y:t,direction:T.UP})&&!e.object)return a.x=n,a.y=t,r=!1})),r})),r&&e.pendingTunnels.push(Object(u.a)({},a))}},{key:"handleLeaving",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleLeaving",this).call(this,e,n);var a=e.board,c=e.tank,r=e.pendingTunnels,i=Object(h.findIndex)(r,(function(e){var t=e.x,c=e.y;return Q(a[c][t],a[n.y][n.x])}));if(i>-1){var o=r.splice(i,1)[0];if(!A(o,n)){var l=a[o.y][o.x];if(l.object)Object(h.get)(a,[n.y,n.x]).object=l.object,delete l.object;else A(c,o)&&I.moveTank(e,n)}}}}]),t}(X),ee=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="FLAG",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleTank",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleTank",this).call(this,e,n),e.status="WIN"}}]),t}(X),te=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="WATER",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLanding",value:function(e,n,r){Object(j.a)(Object(R.a)(t.prototype),"handleLanding",this).call(this,e,n,r);var i=e.board[r.y][r.x];i.object===c.MOVABLE_BLOCK&&(i.background=a.MOVABLE_BLOCK_WATER),delete i.object}},{key:"handleTank",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleTank",this).call(this,e,n),e.status="FAIL"}}]),t}(X),ne=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="ICE",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLanding",value:function(e,n,a){Object(j.a)(Object(R.a)(t.prototype),"handleLanding",this).call(this,e,n,a);var c,r=this.getNextTarget(e,n,a);r&&(null===(c=I.getObstacle(e.board[a.y][a.x]))||void 0===c||c.handleMove(e,a,r))}},{key:"handleTank",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleTank",this).call(this,e,n);var a=e.tank,c=e.prevTank,r=y(c,a);if(r){var i=p(Object(u.a)({},a,{direction:r}));I.moveTank(e,i,this.shouldSkip(e,i))}}},{key:"pending",value:function(e,n,a){this.shouldPending(e,n,a)&&Object(j.a)(Object(R.a)(t.prototype),"pending",this).call(this,e,n,a)}},{key:"shouldPending",value:function(e,t,n){return!!this.getNextTarget(e,t,n)}},{key:"getNextTarget",value:function(e,t,n){var a=y(t,n);if(a){var c=p(Object(u.a)({},n,{direction:a}));if(!A(e.tank,c)&&g(c,e.board))return c}return null}},{key:"shouldSkip",value:function(e,n){var a=Object(h.get)(e.board,[n.y,n.x]),c=I.getBackground(a);return!Boolean(a.object)&&!(c instanceof t)}}]),t}(X),ae=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="THIN_ICE",n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleLanding",value:function(e,n,c){Object(j.a)(Object(R.a)(t.prototype),"handleLanding",this).call(this,e,n,c);var r=e.board[c.y][c.x];r.background=a.WATER,r.object&&I.getBackground(r).handleLanding(e,c,c)}},{key:"shouldPending",value:function(e,t,n){return!0}},{key:"handleTank",value:function(e,n){var c=e.tank,r=e.board,i=Object(u.a)({},c),o=r[i.y][i.x];Object(j.a)(Object(R.a)(t.prototype),"handleTank",this).call(this,e,n),o.background=a.WATER,A(i,e.tank)&&I.getBackground(o).handleTank(e,n)}}]),t}(ne),ce=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="TANK_MOVER_N",n.direction=T.UP,n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"handleTank",value:function(e,n){Object(j.a)(Object(R.a)(t.prototype),"handleTank",this).call(this,e,n),I.moveTank(e,p(Object(u.a)({},e.tank,{direction:this.direction})))}}]),t}(X),re=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="TANK_MOVER_S",n.direction=T.DOWN,n}return Object(_.a)(t,e),t}(ce),ie=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="TANK_MOVER_W",n.direction=T.LEFT,n}return Object(_.a)(t,e),t}(ce),oe=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(c)))).css="TANK_MOVER_E",n.direction=T.RIGHT,n}return Object(_.a)(t,e),t}(ce),le={0:{background:a.DIRT},2:{background:a.FLAG},3:{background:a.WATER},4:{object:c.SOLID_BLOCK},5:{object:c.MOVABLE_BLOCK},6:{object:c.BRICKS},7:{object:c.ANTI_TANK_N},8:{object:c.ANTI_TANK_E},9:{object:c.ANTI_TANK_S},10:{object:c.ANTI_TANK_W},11:{object:c.MIRROR_NW},12:{object:c.MIRROR_NE},13:{object:c.MIRROR_SE},14:{object:c.MIRROR_SW},15:{background:a.TANK_MOVER_N},16:{background:a.TANK_MOVER_E},17:{background:a.TANK_MOVER_S},18:{background:a.TANK_MOVER_W},19:{object:c.CRYSTAL_BLOCK},20:{object:c.ROTARY_MIRROR_NW},21:{object:c.ROTARY_MIRROR_NE},22:{object:c.ROTARY_MIRROR_SE},23:{object:c.ROTARY_MIRROR_SW},24:{background:a.ICE},25:{background:a.THIN_ICE}},se=16;!function(e){e.UP="N",e.DOWN="S",e.LEFT="W",e.RIGHT="E",e.FIRE_UP="0",e.FIRE_DOWN="1",e.FIRE_LEFT="2",e.FIRE_RIGHT="3",e.FIRE=" ",e.UNDO="UNDO",e.PAUSE="PAUSE",e.NEXT_LEVEL="NEXT_LEVEL",e.PREV_LEVEL="PREV_LEVEL",e.HINT="HINT"}(T||(T={}));var ue=function(e){return[T.UP,T.DOWN,T.LEFT,T.RIGHT].includes(e)},Oe=new(function(){function e(){Object(b.a)(this,e),this.record=[],this.history=[]}return Object(d.a)(e,[{key:"save",value:function(e,t){var n=e.board,a=e.tank,c=e.prevTank,r=e.laser,i=e.pending,o=e.pendingTunnels,l=e.status,s=e.levelIndex;if(t===T.FIRE){var u,b=(u={},Object(O.a)(u,T.UP,T.FIRE_UP),Object(O.a)(u,T.DOWN,T.FIRE_DOWN),Object(O.a)(u,T.LEFT,T.FIRE_LEFT),Object(O.a)(u,T.RIGHT,T.FIRE_RIGHT),u);this.record.push(b[a.direction])}else this.record.push(t);this.history.push({board:n,tank:a,prevTank:c,laser:r,pending:i,pendingTunnels:o,status:l,levelIndex:s})}}]),e}()),be={board:Object(h.range)(0,se).map((function(){return Object(h.range)(0,se).map((function(){return{background:a.DIRT}}))})),tank:{x:0,y:0,direction:T.UP},prevTank:{x:0,y:0,direction:T.UP},laser:null,pending:[],pendingTunnels:[],status:"PLAYING",levelIndex:0,timer:0,rendering:!1,pause:!1,levels:[]},de=Object(f.b)({name:"game",initialState:be,reducers:{loadLevels:function(e,t){var n=t.payload,a=n.levels,c=n.levelIndex;e.levels=a,localStorage.setItem("levels",JSON.stringify(a)),de.caseReducers.loadLevel(e,fe(c))},loadLevel:function(e,t){var n=e.board,c=e.tank,r=e.levels,i=t.payload,o=Object(h.get)(r,[i]);if(o){e.levelIndex=i,localStorage.setItem("levelIndex",JSON.stringify(i));var l=["FB2D0F","36FA0E","1538FF","36FCFF","FFFB0A","F542F9","FFFFFF","A1A1A1"];o.board.forEach((function(e,t){return e.forEach((function(e,r){if(1===e)c.x=t,c.y=r,c.direction=T.UP,n[r][t]={background:a.DIRT};else if(e>63&&e<96)n[r][t]={color:l[(15&e)>>1],background:a.TUNNEL};else{var i=le[e];i||console.log(e),n[r][t]=Object(u.a)({background:a.DIRT},i)}}))})),e.prevTank=Object(u.a)({},c),e.laser=null,e.pending=[],e.pendingTunnels=[],e.timer=0===e.timer?1:0,e.rendering=!1,e.pause=!1,e.status="PLAYING",console.log(Oe.record.join("")),Oe.record=[]}},undo:function(e){return Object(u.a)({},e,{},Oe.history.pop(),{timer:e.timer+1})},togglePause:function(e){e.pause=!e.pause},moveTank:function(e,t){var n=e.tank,a=t.payload;n.direction===a?I.moveTank(e,p(n),!0):(n.direction=a,e.prevTank=Object(u.a)({},n)),e.timer+=1,e.rendering="FAIL"!==e.status},fireTank:function(e){var t=e.tank;e.laser||(e.laser=t),de.caseReducers.renderFrame(e)},renderFrame:function(e){e.rendering=!1,I.checkLaser(e),I.checkPending(e),I.checkTank(e),e.timer+=1,e.rendering="PLAYING"===e.status&&(e.rendering||Boolean(e.laser)||e.pending.length>0)}}}),he=de.actions,fe=he.loadLevel,je=he.loadLevels,ve=he.undo,Re=he.togglePause,_e=he.renderFrame,Te=he.moveTank,Ae=he.fireTank,ye=function(e){return function(t,n){var a=n().game,c=a.tank,r=a.board,i=a.status,o=a.pending,l=a.laser,s=a.levelIndex;if(e===T.UNDO)t(ve());else if(e===T.PAUSE)t(Re());else if(e===T.NEXT_LEVEL)t(fe(s+1));else if(e===T.PREV_LEVEL)t(fe(s-1));else if(function(e){return ue(e)||e===T.FIRE}(e)&&0===o.length&&!l&&"PLAYING"===i){var u=p(c);e===T.FIRE?(Oe.save(a,e),t(Ae())):ue(e)&&(c.direction!==e||g(u,r))&&(Oe.save(a,e),t(Te(e)))}}},Ee=de,Ne=n(21),ge=n.n(Ne),pe=n(26),Ie=n(17),ke=(n(47),i.a.memo((function(e){var t=e.tile,n=e.tileSize;return i.a.createElement("div",{style:{width:n,height:n},className:["board-object",I.getBackgroundCss(t)].filter(Boolean).join(" ")},t.background===a.TUNNEL&&i.a.createElement("div",{style:{background:"transparent",borderRadius:"50%",border:"".concat(n/8,"px solid #").concat(t.color),boxSizing:"border-box"}}),t.object&&i.a.createElement("div",{className:I.getObstacleCss(t)}))}))),me=i.a.memo((function(e){var t=e.row,n=e.tileSize;return i.a.createElement("div",{className:"row"},Object(h.map)(t,(function(e,t){return i.a.createElement(ke,{key:t,tile:e,tileSize:n})})))})),Le=function(e){var t;return(t={},Object(O.a)(t,T.UP,"N"),Object(O.a)(t,T.DOWN,"S"),Object(O.a)(t,T.LEFT,"W"),Object(O.a)(t,T.RIGHT,"E"),t)[e]},Me=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(v.a)(this,Object(R.a)(t).call(this,e))).state={limit:0},n.boardRef=i.a.createRef(),n.interval=void 0,Object(h.bindAll)(Object(Ie.a)(n),["handleResize"]),n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.handleResize);var t=["bg0","bg1","bg2"];this.interval=setInterval(Object(pe.a)(ge.a.mark((function n(){var a,c,r;return ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(a=e.boardRef.current)&&(c=a.querySelectorAll([".ANTI_TANK_N",".ANTI_TANK_E",".ANTI_TANK_S",".ANTI_TANK_W",".TANK_MOVER_N",".TANK_MOVER_S",".TANK_MOVER_W",".TANK_MOVER_E",".FLAG",".WATER"].join(", ")),r=t.shift()||"",c.forEach((function(e){var n;(n=e.classList).remove.apply(n,t),e.classList.add(r)})),t.push(r));case 2:case"end":return n.stop()}}),n)}))),600),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),clearInterval(this.interval)}},{key:"handleResize",value:function(){if(this.boardRef.current){var e,t=this.boardRef.current,n=t.offsetWidth,a=t.offsetHeight;this.setState({limit:null!==(e=Object(h.min)([n,a]))&&void 0!==e?e:0})}}},{key:"shouldComponentUpdate",value:function(e,t){return t.limit!==this.state.limit||e.game.timer!==this.props.game.timer}},{key:"render",value:function(){var e=this.props.game,t=this.state.limit,n=e.board,a=e.tank,c=e.laser,r=Math.floor(t/(se+2)),o={width:r,height:r};return i.a.createElement("div",{ref:this.boardRef,className:"Board"},i.a.createElement("div",null,Object(h.map)(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P"],(function(e,t){return i.a.createElement("div",{key:t,style:{width:r,display:"inline-block"}},e)}))),i.a.createElement("div",{style:{width:r*se,height:r*se,margin:"0 auto"}},Object(h.map)(n,(function(e,t){return i.a.createElement(me,{key:t,row:e,tileSize:r})})),Object(h.map)(Object(h.range)(se),(function(e){return i.a.createElement("div",{key:e,style:{position:"absolute",verticalAlign:"center",lineHeight:"".concat(r,"px"),left:-r,top:e*r}},e+1)})),i.a.createElement("div",{className:"tank TANK_".concat(Le(a.direction)),style:Object(u.a)({left:a.x*r,top:a.y*r},o)}),c&&i.a.createElement("div",{className:"laser ".concat(Le(c.direction)),style:[T.UP,T.DOWN].includes(c.direction)?Object(u.a)({left:c.x*r+(r/2-2),top:c.y*r},o,{width:4}):Object(u.a)({left:c.x*r,top:c.y*r+(r/2-1)},o,{height:4})})),i.a.createElement("div",null,Object(h.map)(Object(h.range)(0,16),(function(e){return i.a.createElement("div",{key:e,style:{width:r,display:"inline-block"}},e+1)}))))}}]),t}(i.a.Component),Ke=function(){var e=Object(s.c)((function(e){return e.game})),t=Object(s.b)(),n=e.status,a=e.levelIndex,c=Object(h.debounce)((function(){return t(_e())}),10);return Object(r.useEffect)((function(){var e=function(e){var n={ARROWUP:T.UP,ARROWDOWN:T.DOWN,ARROWLEFT:T.LEFT,ARROWRIGHT:T.RIGHT,U:T.UNDO," ":T.FIRE,P:T.PAUSE}[e.key.toUpperCase()];n&&t(ye(n))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]),Object(r.useEffect)((function(){e.rendering&&!e.pause&&c()}),[c,e]),Object(r.useEffect)((function(){"WIN"===n&&t(fe(a+1))}),[t,a,n]),i.a.createElement(Me,{game:e})},xe=n(28),De=n(27),Se=(n(48),function(){var e=Object(s.b)(),t=Object(r.useState)(null),n=Object(De.a)(t,2),a=n[0],c=n[1],o=function(t){var n=new FileReader;n.onload=function(t){var n,a,c;(null===(n=t.target)||void 0===n?void 0:n.result)&&e((c=null===(a=t.target)||void 0===a?void 0:a.result,function(e){var t={board:256,levelName:31,hint:256,author:31,scoreDifficulty:2},n=Object(h.sum)(Object.values(t)),a=Object(h.map)(Object(h.range)(Math.floor(c.byteLength/n)),(function(e){var a=n*e,r={};return Object(h.map)(t,(function(e,t){r[t]=c.slice(a,a+e),a+=e})),{board:Object(h.chunk)(Array.from(new Uint8Array(r.board)),16),levelName:String.fromCharCode.apply(null,Array.from(new Uint8Array(r.levelName))),hint:String.fromCharCode.apply(null,Array.from(new Uint8Array(r.hint))),author:String.fromCharCode.apply(null,Array.from(new Uint8Array(r.author))),scoreDifficulty:new Uint16Array(r.scoreDifficulty)[0]}}));e(je({levels:a,levelIndex:0}))}))},n.readAsArrayBuffer(t)};return i.a.createElement("div",{className:"MenuBar"},Object(h.map)([{name:"Game",items:[{render:function(){return i.a.createElement("div",null,i.a.createElement("label",null,"Open Data File",i.a.createElement("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:function(e){var t=e.currentTarget.files;(null===t||void 0===t?void 0:t.length)&&o(t[0]),c(null)}})))}}]},{name:"Options",items:[{name:"Animation"}]},{name:"Editor",onClick:function(){c(null)}},{name:"Help",items:[{name:"About"}]}],(function(e,t){var n=e.name,r=Object(xe.a)(e,["name"]);return i.a.createElement("div",Object.assign({key:t,className:"MenuBarItem ".concat(n===(null===a||void 0===a?void 0:a.menu.name)?"active ":""),onClick:function(t){var n=t.currentTarget,r=n.offsetTop,i=n.offsetHeight,o=n.offsetLeft;c(a?null:{menu:e,top:r+i,left:o})},onMouseEnter:function(t){var n=t.currentTarget,r=n.offsetTop,i=n.offsetHeight,o=n.offsetLeft;a&&c({menu:e,top:r+i,left:o})}},r),n)})),i.a.createElement("ul",{className:"Menu",style:(null===a||void 0===a?void 0:a.menu.items)?{top:a.top,left:a.left}:{display:"none"}},Object(h.map)(null===a||void 0===a?void 0:a.menu.items,(function(e,t){var n=e.name,a=e.render;return i.a.createElement("li",{key:t},a?a():n)}))))}),We=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.game})),n=t.levelIndex,a=t.levels,c=Oe.record,r=Object(h.get)(a,[n]),o=Object(h.filter)(c,(function(e){return!ue(e)})).length,l=c.length-o;return i.a.createElement("div",{className:"control-panel"},i.a.createElement("div",{className:"info",style:{position:"relative"}},r&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"absolute",top:"16%",left:"24%",height:"8%",width:"52%",textAlign:"center",color:"#0df90a"}},n+1),i.a.createElement("div",{style:{position:"absolute",top:"39%",left:"5%",height:"8%",width:"90%",textAlign:"center",color:"#0df90a",fontSize:"".concat(Object(h.max)([.225/r.levelName.length,1.7]),"vw")}},r.levelName),i.a.createElement("div",{style:{position:"absolute",top:"59%",left:"5%",height:"8%",width:"90%",textAlign:"center",color:"#0df90a"}},r.author),i.a.createElement("div",{style:{position:"absolute",top:"82%",left:"11%",height:"8%",width:"32%",textAlign:"center",color:"#0df90a"}},l),i.a.createElement("div",{style:{position:"absolute",top:"82%",left:"58%",height:"8%",width:"32%",textAlign:"center",color:"#0df90a"}},o),i.a.createElement("div",null))),i.a.createElement("div",{className:"control"},Object(h.map)([[{name:"Undo",cmd:T.UNDO},{name:"Hint",onClick:function(){(null===r||void 0===r?void 0:r.hint)&&alert(null===r||void 0===r?void 0:r.hint)}}],[{name:"Save Position"}],[{name:"Restore Position"}],[{name:"New"},{name:"Restart"}],[{name:"Load Level"}],[{name:"<< Level",cmd:T.PREV_LEVEL},{name:"Level >>",cmd:T.NEXT_LEVEL}]],(function(t,n){return i.a.createElement("div",{key:n},Object(h.map)(t,(function(t,n){var a=t.name,c=t.cmd,r=t.onClick;return i.a.createElement("div",{key:n,onClick:function(t){r?r(t):c&&e(ye(c))}},a)})))}))))},we=function(){var e=Object(s.b)();return Object(r.useEffect)((function(){try{var t,n,a=JSON.parse(null!==(t=localStorage.getItem("levels"))&&void 0!==t?t:""),c=JSON.parse(null!==(n=localStorage.getItem("levelIndex"))&&void 0!==n?n:"0");a&&e(je({levels:a,levelIndex:c}))}catch(r){alert("failed to load levels: ".concat(r))}}),[e]),i.a.createElement("div",{className:"App"},i.a.createElement(Se,null),i.a.createElement("div",{className:"main"},i.a.createElement(Ke,null),i.a.createElement(We,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=n(11),Be=Object(Fe.combineReducers)({game:Ee.reducer}),Ce=Object(f.a)({reducer:Be});l.a.render(i.a.createElement(s.a,{store:Ce},i.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.e2ed4d46.chunk.js.map